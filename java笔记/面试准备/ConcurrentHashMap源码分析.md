# ConcurrentHashMap源码分析

## jdk1.8

创建对象时候并没有进行内部数组创建, 他在put的时候进行了数组初始化, 默认容量是16. 实际开发过程中, 要指定初始化长度. 因为扩容会消耗大量性能. 

在 1.7 中, 如果创建的时候指定初始容量为32, 那么 put 之后, 实际初始容量就是32. 

在 1.8 中, 如果创建的时候指定初始容量为32, 那么 put 之后, 实际的初始容量是64.  1.8 中的计算容量的方法是 32 + 32 >> 1 + 1; 也就是通过49算出来的. 所以结果是64.

![image-20210318150413935](https://raw.githubusercontent.com/jssda/picbed/master/image-20210318150413935.png)







